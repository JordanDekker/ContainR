{% extends "index.html" %}

{% block extended_app_content %}
<div class="col-sm-9" id="import">
    <div>
        <h4>Input files</h4>
        <!--form object is from app/web/routes.py > preprocessing()-->
        {% if form %}
        {{ wtf.quick_form(form) }}
        {% endif %}
        <img id="upload_load" src="{{ url_for('static', filename='images/loading2.gif') }}" alt="Loading..."
            style="width:100px;height:auto;border:0">
        <hr>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-info" role="alert">{{ message }}</div>
                {% if message == 'Files were successfully uploaded!' %}
                    <button onclick="redirectPage(this)" data-url="{{ url_for('web.preprocessing')}}" class="nav-button">Start preprocessing</button>
                {% endif %}
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $("#upload_load").hide();
    $("#submit").click(function () {
        var fw_file = $("#forward_file").val();
        var rv_file = $("#reverse_file").val();
        if (fw_file != "" && rv_file != "") {
            $("#upload_load").show();
        };
    });
</script>
{% if scroll %}
<script>
    document.getElementById('{{ scroll }}').scrollIntoView();
</script>
{% endif %}
{% endblock %}
